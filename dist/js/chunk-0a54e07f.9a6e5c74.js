(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a54e07f"],{"3d87":function(e,t,a){"use strict";var r=a("64e0"),i=a.n(r);i.a},"5cc8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"project"},[a("div",{staticClass:"title"},[e.isAddProject?[e._v("\n      添加项目\n    ")]:[e._v("\n      修改项目\n    ")]],2),a("div",{staticClass:"project-picture"},[a("el-upload",{attrs:{action:"","http-request":e.httpRequest,"list-type":"picture-card","file-list":e.projectImg,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),a("div",{staticClass:"project-con"},[a("el-form",{ref:"param",attrs:{rules:e.rules,model:e.param,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请填写名称"},model:{value:e.param.name,callback:function(t){e.$set(e.param,"name",t)},expression:"param.name"}})],1),a("el-form-item",{attrs:{label:"开发周期：",prop:"cycle"}},[a("el-input",{attrs:{placeholder:"请填写周期"},model:{value:e.param.cycle,callback:function(t){e.$set(e.param,"cycle",t)},expression:"param.cycle"}},[a("template",{slot:"append"},[e._v("月")])],2)],1),a("el-form-item",{attrs:{label:"项目介绍：",prop:"introduce"}},[a("el-input",{attrs:{type:"textarea",placeholder:"项目的介绍"},model:{value:e.param.introduce,callback:function(t){e.$set(e.param,"introduce",t)},expression:"param.introduce"}})],1),a("el-form-item",{attrs:{label:"负责模块：",prop:"doit"}},[a("el-input",{attrs:{type:"textarea",placeholder:"负责做的模块"},model:{value:e.param.doit,callback:function(t){e.$set(e.param,"doit",t)},expression:"param.doit"}})],1),a("el-form-item",{attrs:{label:"技术支持：",prop:"skill"}},[a("el-input",{attrs:{type:"textarea",placeholder:"项目所用到的技术"},model:{value:e.param.skill,callback:function(t){e.$set(e.param,"skill",t)},expression:"param.skill"}})],1),a("el-form-item",[e.isAddProject?[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addProjectFunc("param")}}},[e._v("添加项目")])]:[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editProjectFunc("param")}}},[e._v("修改项目")])]],2)],1)],1)])},i=[],l={name:"projectAddOrModify",data:function(){return{loading:!0,isAddProject:!0,param:{name:"",cycle:"",introduce:"",doit:"",skill:"",img:[]},rules:{name:[{required:!0,message:"请填写项目名称",trigger:"blur"}],introduce:[{required:!0,message:"项目的介绍",trigger:"blur"}],doit:[{required:!0,message:"负责做的模块",trigger:"blur"}],skill:[{required:!0,message:"项目所用到的技术",trigger:"blur"}]},url:{addProjectUrl:this.$wang.api.addProjectUrl,getProjectDetailUrl:this.$wang.api.getProjectDetailUrl,editProjectUrl:this.$wang.api.editProjectUrl},projectImg:[],dialogImageUrl:"",dialogVisible:!1}},methods:{handleRemove:function(e,t){var a=this;this.param.img.map(function(t,r){if(e.id===t.id)return a.param.img.splice(r,1),!1})},httpRequest:function(e){var t=this;console.log(e.file);var a={};a.id=e.file.uid,this.$wang.base64(e.file).then(function(e){0===e.code?(a.url=e.data,t.param.img.push(a)):t.$message.error("图片传化失败")})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getProjectDetailFunc:function(){var e=this;this.$wang.ajax({url:this.url.getProjectDetailUrl,param:{_id:this.$route.query.projectId}}).then(function(t){0===t.code?(e.param=t.data,e.loading=!1,e.projectImg=JSON.parse(JSON.stringify(t.data)).img):e.$message({message:"服务器链接失败",type:"warning"})})},addProjectFunc:function(e){var t=this;if(0===this.param.img.length)return this.$message.error("请上传项目图片"),!1;this.$refs[e].validate(function(e){e&&t.$wang.ajax({url:t.url.addProjectUrl,param:t.param}).then(function(e){0===e.code?(t.$message({message:e.data,type:"success"}),t.$router.push("/projectList")):t.$message({message:"服务器链接失败",type:"warning"})})})},editProjectFunc:function(e){var t=this;if(0===this.param.img.length)return this.$message.error("请上传项目图片"),!1;this.$refs[e].validate(function(e){e&&t.$wang.ajax({url:t.url.editProjectUrl,param:t.param}).then(function(e){0===e.code?(t.$message({message:e.data,type:"success"}),t.$router.push("/projectList")):t.$message({message:"服务器链接失败",type:"warning"})})})}},created:function(){this.$route.query.projectId?(this.isAddProject=!1,this.getProjectDetailFunc()):(this.isAddProject=!0,this.loading=!1)}},s=l,o=(a("3d87"),a("2877")),n=Object(o["a"])(s,r,i,!1,null,"411d6e12",null);n.options.__file="projectAddOrModify.vue";t["default"]=n.exports},"64e0":function(e,t,a){}}]);
//# sourceMappingURL=chunk-0a54e07f.9a6e5c74.js.map