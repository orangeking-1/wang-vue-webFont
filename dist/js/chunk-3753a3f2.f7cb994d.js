(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3753a3f2"],{"1d33":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message"},[t._m(0),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"message-con"},[e("comment",{attrs:{title:"ç•™è¨€",commentList:t.commentList},on:{submitComment:t.addCommentFunc,deleteCommment:t.deleteCommmentFunc}})],1)])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-img"},[e("img",{attrs:{src:n("3efe"),alt:"message-img"}}),e("div",{staticClass:"message-font"},[t._v("ç•™è¨€æ¿")])])}],i=n("e335"),m={name:"messageBoard",components:{comment:i["a"]},data:function(){return{loading:!0,commentList:[],url:{addCommentUrl:this.$wang.api.addCommentUrl,getCommentlistUrl:this.$wang.api.getCommentlistUrl,deleteCommentUrl:this.$wang.api.deleteCommentUrl}}},methods:{getCommentFunc:function(){var t=this;this.$wang.ajax({url:this.url.getCommentlistUrl,param:{type:"1"}}).then((function(e){t.loading=!1,t.commentList=e.data})).catch((function(){t.loading=!1}))},addCommentFunc:function(t){var e=this,n={content:t,author:this.$store.state.userInfo._id,type:"1"};this.$wang.ajax({url:this.url.addCommentUrl,param:n}).then((function(t){0===t.code?(e.$message({message:"ç•™è¨€æˆåŠŸï¼",type:"success"}),e.getCommentFunc()):e.$message({message:"æœåŠ¡å™¨å‡ºé”™",type:"error"})}))},deleteCommmentFunc:function(t){var e=this;this.$wang.ajax({url:this.url.deleteCommentUrl,param:{_id:t}}).then((function(t){0===t.code?(e.$message({message:"åˆ é™¤è¯„è®ºæˆåŠŸï¼",type:"success"}),e.getCommentFunc()):e.$message({message:"æœåŠ¡å™¨å‡ºé”™",type:"error"})}))}},created:function(){this.getCommentFunc();var t={type:"1",content:"æ‰‹åŠ¨ä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯"};console.log(this.$wang.Sentry),this.$wang.Sentry.captureMessage("ä»˜è´¹åŠŸèƒ½",JSON.stringify(t))}},o=m,c=(n("2bbd"),n("2877")),r=Object(c["a"])(o,s,a,!1,null,"75942b03",null);e["default"]=r.exports},"2bbd":function(t,e,n){"use strict";n("db60")},"3efe":function(t,e,n){t.exports=n.p+"img/messageBoard.0c4fb369.png"},b7f0:function(t,e,n){"use strict";n("c554")},c554:function(t,e,n){},db60:function(t,e,n){},e335:function(t,e,n){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment"},[e("div",{staticClass:"comment-title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"title"},[t._v(t._s(t.title)+" "),e("span",{staticStyle:{color:"#666"}},[t._v("("+t._s(t.commentList.length)+"æ¡)")])]),e("div",{staticClass:"line"})]),e("div",[t.commentList.length>0?t._l(t.commentList,(function(n,s){return e("div",{key:s,staticClass:"comment-content"},[e("div",{staticClass:"con-item"},[e("div",{staticClass:"con-avatar"},[n.author.avatar?[e("img",{attrs:{src:n.author.avatar,width:"100%",height:"100%",alt:"å¤´åƒ"}})]:[e("i",{staticClass:"iconfont icon-huabanfuben"})]],2),e("div",{staticClass:"con-message"},[e("div",{staticClass:"author"},[e("span",{staticClass:"name"},[t._v(t._s(n.author.account))]),e("span",{staticClass:"time"},[t._v(t._s(n.created_time))])]),e("div",{staticClass:"message"},[t._v("\n              "+t._s(n.content)+"\n            ")]),t.canComment?e("el-button",{staticClass:"el-icon-delete",attrs:{type:"text"},on:{click:function(e){return t.deleteCommentFunc(n._id)}}},[t._v("åˆ é™¤")]):t._e()],1)])])})):[e("div",{staticClass:"no-comment"},[t._v("\n        æš‚æ— è¯„è®ºï¼Œå‰å»æ²™å‘\n      ")])]],2),e("div",{staticClass:"comment-form"},[e("div",{staticClass:"form-title"},[t._v("\n      å‘è¡¨è¯„è®ºï¼š\n    ")]),e("div",{staticClass:"form-con"},[e("el-input",{attrs:{autosize:{minRows:4},type:"textarea",placeholder:"è¯·å¡«å†™è¯„è®º"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),e("div",{staticClass:"submit"},[e("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:t.submitCommentFunc}},[t._v("æäº¤")])],1)])])},a=[],i={name:"comment",props:{title:{type:String,require:!0,default:"è¯„è®º"},commentList:{type:Array,required:!0}},data:function(){return{comment:"",canComment:!1}},methods:{submitCommentFunc:function(){var t=this;return this.$store.state.isLoginState?0===this.comment.length?(this.$message({type:"warning",message:"è¯·å¡«å†™è¯„è®ºåå†æäº¤"}),!1):(this.$emit("submitComment",this.comment),void(this.comment="")):(this.$alert("è¯·æ‚¨ç§»æ­¥å‰å»ç™»å½•ï¼Œç„¶åå‘è¡¨è¯„è®ºå•¦ğŸ˜Š",{confirmButtonText:"ç¡®å®š",callback:function(){t.$router.push("/login")}}),!1)},deleteCommentFunc:function(t){var e=this;this.$confirm("æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥è¯„è®º, æ˜¯å¦ç»§ç»­?","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){e.$emit("deleteCommment",t)})).catch((function(){}))}},created:function(){this.canComment=this.$store.state.isLoginState&&JSON.parse(localStorage.getItem("userInfo")).admin}},m=i,o=(n("b7f0"),n("2877")),c=Object(o["a"])(m,s,a,!1,null,"f3ec3b04",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-3753a3f2.f7cb994d.js.map